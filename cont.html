<%@ page import="java.io.*,java.util.*,javax.mail.*"%>
<%@ page import="javax.mail.internet.*,javax.activation.*"%>
<%@ page import="javax.servlet.http.*,javax.servlet.*"%>

 	<%
	String result;
	String x=request.getParameter("Email");
	String from = "hemant.singhi@aurouniversity.edu.in";
	final String username = "hemant.singhi@aurouniversity.edu.in";
	final String password = "xii-c7420";

	Properties props = new Properties();
	props.put("mail.smtp.auth", "true");
	props.put("mail.smtp.starttls.enable", "true");
	props.put("mail.smtp.host", "smtp.gmail.com");
	props.put("mail.smtp.port", "25");

	//Get the Session object.
	Session mailSession = Session.getInstance(props,
			new javax.mail.Authenticator() {
				protected PasswordAuthentication getPasswordAuthentication() {
					return new PasswordAuthentication(username,password);
				}
			});

	try {
		// Create a default MimeMessage object.
		Message message = new MimeMessage(mailSession);

		// Set From: header field of the header.
		message.setFrom(new InternetAddress(from));

		// Set To: header field of the header.
		message.setRecipients(Message.RecipientType.TO,
				InternetAddress.parse(x));

		// Set Subject: header field
		message.setSubject("Thank you");

		// Now set the actual message
		message.setText("Hello, Thank you for contacting us. Your contact details are recieved ");

		// Send message
		Transport.send(message);

	
	} catch (MessagingException e) {
		e.printStackTrace();
		result = "Error: unable to send message....";

	}
%>
<html>
<script language="JavaScript">
function formvalidation()
{

var x=document.forms["detectform"]["Email"].value;
var atpos=x.indexOf("@");
var dotpos=x.lastIndexOf(".");
if (atpos<1 || dotpos<atpos+2 || dotpos+2>=x.length)
  {
  alert("Not a valid e-mail address");
  return false;
  }

 
if (x==null || x=="")
{
alert("Please do not leave blank");
}
var y=document.forms["detectform"]["fname"].value;

if (y==null || y=="")
{
alert("Please do not leave blank");
}
if (isNan(y))
{alert("Please enter alphabets only!!!");

return false;
}
}
</script>
<style type="text/css">
input, textarea{
float:right;
margin-right:50px;
}
form{
width:500px;
float:left;
margin-left:100px;}
</style>
<body bgcolor="black">
<img src="contact_1.htm" height="50%">	
<br> 
<form name="detectform" onSubmit="return emailvalidation();" align="center" method="post">
	<font color="White" style="margin-left: -15px">Name:<input type="text" name="fname" onkeypress="if(!isNaN(String.fromCharCode(event.keyCode)))return false;" size="31"><br><br>
		<div style="float:left;
margin-left	: 90px">Address:</div><textarea rows="5" cols="29" style="margin-bottom:10px"></textarea><br><br><br><br><br>
		Contact:<input type="text" name="cont" onkeypress="if(isNaN(String.fromCharCode(event.keyCode)))return false;" size="31"><br><br><div style="margin-left:95px;float: left">

		Email-ID:</div><input type="text" name="Email" size="31"><br><br><br><br>
	</font><input type="submit" ,onChange="emailvalidation()" ,name="Button1" ,value="Submit">&nbsp
	<input type="button", value="Cancel">

</form>
</body>
</html>